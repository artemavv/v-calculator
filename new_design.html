<!DOCTYPE html>
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Онлайн калькулятор замен</title>
    <script src="src/jquery.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
   
</head>

<body>
    <div>
        <div class="change_calculator_block">
            <h2 class="calculator_h2">Калькулятор замен продуктов</h2>
            <hr class="between_h2_and_h3" />
            <h3 class="calculator_h3">От Нутрициолога Екатерины Войтенко</h3>
            <div class="calculator_result">
                <div class="calculator_result_text">
                </div>
                <div class="calculator_submit_button" id="new_result_button">Новый расчет</div>
            </div>
            <div class="change_calculator">
                <div class="calculator_type_main">
                    <div class="calculator_block">
                        <div class="calculator_type selected_type" id="meat"
                            data-label-1="Выберите мясо, указанное в рецепте и укажите вес в гр."
                            data-label-2="Выберите мясо, на которое хотите поменять"></div>
                        <div>Мясо</div>
                    </div>
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="seafood"
                            data-label-1="Выберите морепродукт, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите морепродукт, на который хотите поменять"></div>
                        <div>Рыба</div>
                    </div>
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="cereal"
                            data-label-1="Выберите крупу, указанную в рецепте и укажите вес в гр."
                            data-label-2="Выберите крупу, на которую хотите поменять"></div>
                        <div>Крупа</div>
                    </div>
                    
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="milk"
                            data-label-1="Выберите молочный продукт, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите молочный продукт, на который хотите поменять"></div>
                        <div>Молочный<br>продукт</div>
                    </div>

                    <div class="calculator_block">                    
                        <div class="calculator_type" id="cheese"
                            data-label-1="Выберите сыр, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите сыр, на который хотите поменять"></div>
                        <div>Сыр</div>
                    </div>
                </div>
                
                <div class="inputs_container">
                    <div class="c">
                        <div class="calculator_label_1">Выберите мясо, указанное в рецепте и укажите вес в гр.</div>

                        <select class="select_first" id="source_select" style="width: 50%" >
                            <option value="100" data-dative="курицы">Курица</option>
                            <option value="70" data-dative="говядины">Говядина</option>
                        </select>

                        <input type="number" id="select_weight" placeholder="0 гр.">

                    </div>
                    
                    <div class="c">
                        <div class="calculator_label_2">Выберите мясо, на которое хотите поменять</div>
                        <select class="select_second" id="target_select" style="width: 80%" >
                            <option value="70" data-dative="говядины постной">Говядина постная</option>
                        </select>
                    </div>
                </div>
                
                <div class="calculator_submit_button" id="result_button">Рассчитать</div>
            </div>
            
        </div>
    </div>
    
    <div class="block_smm">
        <a href="https://t.me/voitenko2024" target="_blank" class="link_smm"><img src="src/main_tg.png" alt="link telegram" class="link_img"></a>
        <a href="https://vk.com/voitenko_cats" target="_blank" class="link_smm"><img src="src/main_vk.png" alt="link vk" class="link_img"></a>
        <a href="https://www.instagram.com/voitenko_catttsss/" target="_blank" class="link_smm"><img src="src/main_instagram.png" alt="link instagram" class="link_img"></a>
    </div>
    
     <script>
        $('#source_select, #target_select').select2({
    width: 'resolve',
    minimumResultsForSearch: 300
});
        </script>
    <script type="text/javascript">
        $(function () {
            function calculate() {
                
                
                valueSelectFirst = $('#source_select').val();
                valueSelectSecond = $('#target_select').val();
                
                textSelectFirst =  $('#source_select').find(":selected").text();
                textSelectSecond = $('#target_select').find(":selected").text();
                
                textSelectFirst =  $('#source_select').find(":selected").data('dative');
                textSelectSecond = $('#target_select').find(":selected").data('dative');
                
                valueSelectFirst = parseFloat(valueSelectFirst);
                valueSelectSecond = parseFloat(valueSelectSecond);
                
                var weightCalc = parseFloat($("#select_weight").val());
                if (!(weightCalc)) {
                    weightCalc = parseFloat(0);
                };

                var resultValue = weightCalc * valueSelectSecond / valueSelectFirst;
                
                resultValue = parseFloat(resultValue);
                resultValue = Math.round(resultValue);

                var resultText = 'Для замены <span class="source_value">' + weightCalc + ' гр</span> ' 
                        + '<span class="product_background">' + textSelectFirst + '</span>' 
                        + '<br>вам необходимо <span class="target_value">' + resultValue + ' гр</span> '
                        + '<span class="product_background">' + textSelectSecond + '</span>';

                $(".change_calculator").hide();
                $("#new_result_button").show();
                $(".calculator_result").show();
                $(".calculator_result_text").html(resultText);
            };

            $("#result_button").click(calculate);
       
            
            const types = [ 'meat', 'seafood', 'cereal', 'milk', 'cheese' ];
            
            const sourceValues = {
                meat: {
                    "Курица": [100, "курицы"],
                    "Говядина": [70, "говядины"],
                },
                seafood: {
                    "Курица": [100, "курицы"],
                    "Говядина": [70, "говядины"],
                },
                cereal: {
                    "Гречка": [100, "гречки"],
                    "Макароны": [100, "макарон"],
                    "Рис": [90, "риса"],
                    "Картофель": [333, "картофеля"],
                },
                milk: {
                    "Молоко 2,5%": [100, "молока 2,5%"],
                    "Творог мягк. обезж.": [100, "творога мягкого обезжиренного"],
                },
                cheese: {
                    "Сыр 45%": [100, "сыра 45%"], 
                    "Брынза": [145, "брынзы"],
                    "Рикотта": [45, "рикотты"],
                }
            };
            
            
            const targetValues = {
                meat: {
                    "Говядина постная": ["70", "говядины постной"],
                    "Говядина лопатка": ["80", "говядины лопатки"],
                    "Говядина мраморная": ["50", "говядины мраморной"],
                    "Говяжья печень": ["80", "говяжьей печени"],
                    "Индейка бедро без кости": ["80", "индейки бедра без кости"],
                    "Индейка филе": ["100", "индейки филе"],
                    "Конина": ["80", "конины"],
                    "Кролик филе": ["60", "кролика филе"],
                    "Куриная печень": ["80", "куриной печени"],
                    "Куриное красное мясо": ["50", "куриного красного мяса"],
                    "Куриное сердце": ["70", "куриного сердца"],
                    "Куриное филе": ["100", "куриного филе"],
                    "Куриные желудки": ["100", "куриных желудков"],
                    "Лосятина": ["100", "лосятины"],
                    "Свиная вырезка": ["60", "свиной вырезки"],
                    "Свинина корейка вырезка": ["80", "свинины корейки вырезки"],
                    "Свинина лопатка": ["45", "свинины лопатки"],
                    "Утка": ["80", "утки"],
                    "Шея свиная": ["30", "шеи свиной"],
                    "Язык говяжий": ["50", "языка говяжьего"],
                    "Язык свиной": ["55", "языка свиного"]
                },
                seafood: {
                    "Горбуша": ["100", "горбуши"],
                    "Горбуша слабосоленая": ["70", "горбуши слабосоленой"],
                    "Дорадо": ["130", "дорадо"],
                    "Зубатка": ["90", "зубатки"],
                    "Кальмар": ["120", "кальмара"],
                    "Камбала": ["120", "камбалы"],
                    "Карась": ["120", "карася"],
                    "Кета": ["90", "кеты"],
                    "Кета слабосоленная": ["60", "кеты слабосоленой"],
                    "Кижуч": ["70", "кижуча"],
                    "Креветки очищенные": ["120", "креветок очищенных"],
                    "Минтай": ["140", "минтая"],
                    "Морской окунь": ["80", "морского окуня"],
                    "Окунь речной": ["130", "окунь речного"],
                    "Пангасиус": ["130", "пангасиуса"],
                    "Семга": ["50", "семги"],
                    "Семга слабосоленая": ["55", "семги слабосоленой"],
                    "Сибас": ["120", "сибаса"],
                    "Скумбрия": ["60", "скумбрии"],
                    "Тилапия": ["120", "тилапии"],
                    "Треска": ["110", "трески"],
                    "Тунец": ["90", "тунца"],
                    "Тунец конс. в собст. соку": ["100", "тунца консервированного в собственном соку"],
                    "Форель": ["80", "форели"],
                    "Форель слабосоленая": ["60", "форели слабосоленой"],
                    "Щука филе": ["130", "щуки филе"]
                },
                cereal: {
                    "Бобовая смесь": ["100", "бобовой смеси"],
                    "Булгур": ["100", "булгура"],
                    "Горох": ["100", "гороха"],
                    "Гречка": ["100", "гречки"],
                    "Гречка зеленая": ["100", "гречки зеленой"],
                    "Киноа": ["90", "киноа"],
                    "Кукурузная крупа": ["100", "кукурузной крупы"],
                    "Кускус": ["100", "кускуса"],
                    "Маш": ["90", "маша"],
                    "Нут": ["90", "нута"],
                    "Овсянка": ["100", "овсянки"],
                    "Перловка": ["100", "перловки"],
                    "Полба дробленая": ["100", "полбы дробленой"],
                    "Пшено": ["100", "пшена"],
                    "Рис": ["90", "риса"],
                    "Чечевица": ["90", "чечевицы"],
                    "Ячневая крупа": ["100", "ячневой крупы"]
                },
                milk: {
                    "Кефир": ["100", "кефира"],
                    "Ряженка 4%": ["80", "ряженки 4%"],
                    "Сливки 10%": ["45", "сливок 10%"],
                    "Кокосовое молоко 70%": ["30", "кокосового молока 70%"],
                    "Творожный сыр": ["25", "творожного сыра"],
                    "Сметана 10%": ["50", "сметаны 10%"]
                },
                cheese: {
                    "Творожный сыр": ["130", "творожного сыра"],
                    "Пармезан": ["85", "пармезана"],
                    "Моцарелла": ["130", "моцареллы"],
                    "Адыгейский сыр": ["130", "адыгейского сыра"],
                    "Брынза": ["145", "брынзы"],
                    "Сыр 45%": ["100", "сыра 45%"],
                    "Рикотта": ["35", "рикотты"]
                }                
            }

            
            // Function to update select options
            function updateSelectOptions(selectId, data) {
              const selectElement = document.getElementById(selectId);

              // Clear existing options
              selectElement.innerHTML = "";

              // Populate the select element with new options from the JSON data
              for (const [name, value] of Object.entries( data )) {
                const option = document.createElement("option");
                option.textContent = name;
                option.value = value[0];
                
                option.setAttribute( "data-dative", value[1] );
                
                selectElement.appendChild(option);
              }
            }
    
            function chooseProductById( idProduct ) {
                $(".calculator_type").removeClass('selected_type');

                if ( types.includes( idProduct ) ) {

                    updateSelectOptions( 'source_select' , sourceValues[idProduct] );
                    updateSelectOptions( 'target_select' , targetValues[idProduct] );

                    $currentType = $( "#" + idProduct );
                    $currentType.addClass('selected_type');

                    const label_1 = $currentType.data('label-1');
                    const label_2 = $currentType.data('label-2');

                    $(".calculator_label_1").html(label_1);
                    $(".calculator_label_2").html(label_2);

                }
            }
        
            function chooseProduct() {
                var idProduct = this.id;
                chooseProductById(idProduct);
            };
            
            $(".calculator_type").click(chooseProduct);
        
            function calculateNew() {
                $(".change_calculator").show();
                $("#result_button").show();
                $("#new_result_button").hide();
                $(".calculator_result_text").empty();
                $(".calculator_result").hide();
            };
            
            $('#source_select, #target_select').on('change', function(){
                
               var $button = $("#result_button");
               
               const target_value = $( "#source_select option:selected" ).text();
               const source_value = $( "#target_select option:selected" ).text();
               
               if ( target_value == source_value ) { // disable button
                    $button.css('background-color', '#666')
                            .css('cursor', 'not-allowed')
                            .css('color', '#777')
                            .off( "click" );
               }
               else { // enable button
                   $button.css('background-color', '#6E1212')
                            .css('cursor', 'pointer')
                            .css('color', '#fff')
                            .on( 'click', calculate );
               }
            });
            
            $("#new_result_button").click(calculateNew);
            
            chooseProductById('meat');
        });

    </script>


</body></html>