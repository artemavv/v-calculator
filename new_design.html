<!DOCTYPE html>
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Онлайн калькулятор замен</title>
    <script src="src/jquery.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
   
</head>

<body>
    <div>
        <div class="change_calculator_block">
            <h2 class="calculator_h2">Калькулятор замен продуктов</h2>
            <hr class="between_h2_and_h3" />
            <h3 class="calculator_h3">От Нутрициолога Екатерины Войтенко</h3>
            <div class="calculator_result">
                <div class="calculator_result_text">
                </div>
                <div class="calculator_submit_button" id="new_result_button">Новый расчет</div>
            </div>
            <div class="change_calculator">
                <div class="calculator_type_main">
                    <div class="calculator_block">
                        <div class="calculator_type selected_type" id="meat"
                            data-label-1="Выберите мясо, указанное в рецепте и укажите вес в гр."
                            data-label-2="Выберите мясо, на которое хотите поменять"></div>
                        <div>Мясо</div>
                    </div>
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="seafood"
                            data-label-1="Выберите морепродукт, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите морепродукт, на который хотите поменять"></div>
                        <div>Рыба</div>
                    </div>
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="cereal"
                            data-label-1="Выберите крупу, указанную в рецепте и укажите вес в гр."
                            data-label-2="Выберите крупу, на которую хотите поменять"></div>
                        <div>Крупа</div>
                    </div>
                    
                    
                    <div class="calculator_block">
                        <div class="calculator_type" id="milk"
                            data-label-1="Выберите молочный продукт, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите молочный продукт, на который хотите поменять"></div>
                        <div>Молочный<br>продукт</div>
                    </div>

                    <div class="calculator_block">                    
                        <div class="calculator_type" id="cheese"
                            data-label-1="Выберите сыр, указанный в рецепте и укажите вес в гр."
                            data-label-2="Выберите сыр, на который хотите поменять"></div>
                        <div>Сыр</div>
                    </div>
                </div>
                
                <div class="inputs_container">
                    <div class="c">
                        <div class="calculator_label_1">Выберите мясо, указанное в рецепте и укажите вес в гр.</div>

                        <select class="select_first" id="source_select" style="width: 50%" >
                            <option value="100">Курица</option>
                            <option value="70">Говядина</option>
                        </select>

                        <input type="number" id="select_weight" placeholder="0 гр.">

                    </div>
                    
                    <div class="c">
                        <div class="calculator_label_2">Выберите мясо, на которое хотите поменять</div>
                        <select class="select_second" id="target_select">
                            <option value="70">Говядина постная</option>
                            <option value="80">Говядина лопатка</option>
                            <option value="50">Говядина мраморная</option>
                            <option value="80">Говяжья печень</option>
                            <option value="80">Индейка бедро без кости</option>
                            <option value="100">Индейка филе</option>
                            <option value="80">Конина</option>
                            <option value="60">Кролик филе</option>
                            <option value="80">Куриная печень</option>
                            <option value="50">Куриное красное мясо</option>
                            <option value="70">Куриное сердце</option>
                            <option value="100">Куриное филе</option>
                            <option value="100">Куриные желудки</option>
                            <option value="100">Лосятина</option>
                            <option value="60">Свиная вырезка</option>
                            <option value="80">Свинина корейка вырезка</option>
                            <option value="45">Свинина лопатка</option>
                            <option value="80">Утка</option>
                            <option value="30">Шея свиная</option>
                            <option value="50">Язык говяжий</option>
                            <option value="55">Язык свиной</option>
                        </select>
                    </div>
                </div>
                
                <div class="calculator_submit_button" id="result_button">Рассчитать</div>
            </div>
            
        </div>
    </div>
    
    <div class="block_smm">
        <a href="https://t.me/voitenko2024" target="_blank" class="link_smm"><img src="/src/main_tg.png" alt="link telegram" class="link_img"></a>
        <a href="https://vk.com/voitenko_cats" target="_blank" class="link_smm"><img src="/src/main_vk.png" alt="link vk" class="link_img"></a>
        <a href="https://www.instagram.com/voitenko_catttsss/" target="_blank" class="link_smm"><img src="/src/main_instagram.png" alt="link instagram" class="link_img"></a>
    </div>
    
     <script>
        $('#source_select, #target_select').select2({
    width: 'resolve',
    minimumResultsForSearch: 300
});
        </script>
    <script type="text/javascript">
        $(function () {
            function calculate() {
                
                
                valueSelectFirst = $('#source_select').val();
                valueSelectSecond = $('#target_select').val();
                
                textSelectFirst =  $('#source_select').find(":selected").text();
                textSelectSecond = $('#target_select').find(":selected").text();
                
                valueSelectFirst = parseFloat(valueSelectFirst);
                valueSelectSecond = parseFloat(valueSelectSecond);
                var weightCalc = parseFloat($("#select_weight").val());
                if (!(weightCalc)) {
                    weightCalc = parseFloat(0);
                };

                var resultValue = weightCalc * valueSelectSecond / valueSelectFirst;
                
                resultValue = parseFloat(resultValue);
                resultValue = Math.round(resultValue);

                var resultText = 'Для замены <span class="source_value">' + weightCalc + ' гр</span> ' 
                        + '<span class="product_background">' + textSelectFirst + '</span>' 
                        + '<br>вам необходимо <span class="target_value">' + resultValue + ' гр</span> '
                        + '<span class="product_background">' + textSelectSecond + '</span>';

                $(".change_calculator").hide();
                $("#new_result_button").show();
                $(".calculator_result").show();
                $(".calculator_result_text").html(resultText);
            };

            $("#result_button").click(calculate);
        });

        $(function () {
            
            const types = [ 'meat', 'seafood', 'cereal', 'milk', 'cheese' ];
            
            const sourceValues = {
                meat: {
                    "Курица": 100,
                    "Говядина": 70,
                },
                seafood: {
                    "Курица": 100,
                    "Говядина": 70,
                },
                cereal: {
                    "Гречка": 100,
                    "Макароны": 100,
                    "Рис": 90,
                    "Картофель": 333
                },
                milk: {
                    "Молоко 2,5%": 100,
                    "Творог мягк. обезж.": 100
                },
                cheese: {
                    "Сыр 45%": 100, 
                    "Брынза": 145,
                    "Рикотта": 45
                }
            };
            
            
            const targetValues = {
                meat: {
                    "Говядина постная": "70",
                    "Говядина лопатка": "80",
                    "Говядина мраморная": "50",
                    "Говяжья печень": "80",
                    "Индейка бедро без кости": "80",
                    "Индейка филе": "100",
                    "Конина": "80",
                    "Кролик филе": "60",
                    "Куриная печень": "80",
                    "Куриное красное мясо": "50",
                    "Куриное сердце": "70",
                    "Куриное филе": "100",
                    "Куриные желудки": "100",
                    "Лосятина": "100",
                    "Свиная вырезка": "60",
                    "Свинина корейка вырезка": "80",
                    "Свинина лопатка": "45",
                    "Утка": "80",
                    "Шея свиная": "30",
                    "Язык говяжий": "50",
                    "Язык свиной": "55"
                },
                seafood: {
                    "Горбуша": "100",
                    "Горбуша слабосоленая": "70",
                    "Дорадо": "130",
                    "Зубатка": "90",
                    "Кальмар": "120",
                    "Камбала": "120",
                    "Карась": "120",
                    "Кета": "90",
                    "Кета слабосоленная": "60",
                    "Кижуч": "70",
                    "Креветки очищенные": "120",
                    "Минтай": "140",
                    "Морской окунь": "80",
                    "Окунь речной": "130",
                    "Пангасиус": "130",
                    "Семга": "50",
                    "Семга слабосоленая": "55",
                    "Сибас": "120",
                    "Скумбрия": "60",
                    "Тилапия": "120",
                    "Треска": "110",
                    "Тунец": "90",
                    "Тунец конс. в собст. соку": "100",
                    "Форель": "80",
                    "Форель слабосоленая": "60",
                    "Щука филе": "130"
                },
                cereal: {
                    "Бобовая смесь": "100",
                    "Булгур": "100",
                    "Горох": "100",
                    "Гречка": "100",
                    "Гречка зеленая": "100",
                    "Киноа": "90",
                    "Кукурузная крупа": "100",
                    "Кускус": "100",
                    "Маш": "90",
                    "Нут": "90",
                    "Овсянка": "100",
                    "Перловка": "100",
                    "Полба дробленая": "100",
                    "Пшено": "100",
                    "Рис": "90",
                    "Чечевица": "90",
                    "Ячневая крупа": "100"
                },
                milk: {
                    "Кефир": "100",
                    "Ряженка 4%": "80",
                    "Сливки 10%": "45",
                    "Кокосовое молоко 70%": "30",
                    "Творожный сыр": "25",
                    "Сметана 10%": "50"
                },
                cheese:{
                    "Творожный сыр": "130",
                    "Пармезан": "85",
                    "Моцарелла": "130",
                    "Адыгейский сыр": "130",
                    "Брынза": "145",
                    "Сыр 45%": "100",
                    "Рикотта": "35"
                }                
            }
            
            // Function to update select options
            function updateSelectOptions(selectId, data) {
              const selectElement = document.getElementById(selectId);

              // Clear existing options
              selectElement.innerHTML = "";

              // Populate the select element with new options from the JSON data
              for (const [name, value] of Object.entries( data )) {
                const option = document.createElement("option");
                option.textContent = name;
                option.value = value;
                selectElement.appendChild(option);
              }
            }
    
            function chooseProduct() {
                var idProduct = this.id;
                
                $(".calculator_type").removeClass('selected_type');
                
                if ( types.includes( idProduct ) ) {
                    
                    updateSelectOptions( 'source_select' , sourceValues[idProduct] );
                    updateSelectOptions( 'target_select' , targetValues[idProduct] );
                    
                    $currentType = $( "#" + idProduct );
                    $currentType.addClass('selected_type');
                    
                    const label_1 = $currentType.data('label-1');
                    const label_2 = $currentType.data('label-2');
                    
                    $(".calculator_label_1").html(label_1);
                    $(".calculator_label_2").html(label_2);

                }
            };
            
            $(".calculator_type").click(chooseProduct);
        
            function calculateNew() {
                $(".change_calculator").show();
                $("#result_button").show();
                $("#new_result_button").hide();
                $(".calculator_result_text").empty();
                $(".calculator_result").hide();
            };
            
            $("#new_result_button").click(calculateNew);
        });

    </script>


</body></html>